# 데이터베이스 예상 질문

### 키 종류에 대해서 설명해주세요

<details>

기본키, 후보키, 대체키, 복합키, 슈퍼키, 외래키, 대리키가 있습니다.
기본키는 각 레코드(행)들을 구분하는데 기준이 되는 키입니다.
후보키는 테이블에서 각 행들을 구분할 수 있는 키가 될 수 있는 하나 또는 두 개 이상의 집합으로 이루어진 키를 말합니다.
대체키는 주키로 선정되지는 못했지만, 주키의 역량을 가지는 것을 말합니다.
복합키는 각 행이 독립적으로 주키를 만들 수 없을 때 두 개 이상을 조합하여 주키를 만드는 것을 말합니다.
슈퍼키는 후보키와 마찬가지로 튜플을 유일하게 식별할 수 있는 키들의 집합을 말합니다.
외래키는 두 테이블을 연결할 때 사용되는 키이며 키를 제공하는 쪽이 부모 테이블을 키를 받아 외래키로 쓰는 쪽을 자식 테이블이라고 합니다.
대리키는 테이블 내에서 주키로 적합한 컬럼을 찾는 것이 아니라 아무 의미 없는 키를 인위적으로 만들어서 사용하는 키를 말합니다.

</details>

### 후보키와 슈퍼키의 차이점에 대해서 설명해주세요

<details>

후보키와 슈퍼키의 차이점은 유일성을 가지냐입니다.
후보키는 유일성을 가지고 있고 슈퍼키는 유일성을 가지고 있지 않습니다.
그렇기에 후보키는 최소한의 개수의 집합으로 유일성을 만족하는 조합들의 집합이고 슈퍼키는 유일성을 만족하는 모든 경우의 수의 집합을 말합니다.

</details>

### 조인에 대해서 설명해주세요

<details>

서로 다른 두 테이블을 연결하여 함께 조회할 때 사용하는 것이 조인입니다.

</details>

### Outer Join, Inner Join에 대해서 설명해주세요

<details>

inner join은 서로 다른 두 테이블이 특정 데이터를 기준으로 서로 매칭되는 데이터들을 조회하는 것을 말합니다.
outer join은 left, right 두 종류가 있고 어떤 테이블을 기준으로 데이터를 모두 뽑아낸 다음 특정 데이터를 기준으로 매칭되는 다른 테이블의 데이터를 조회한 뒤 매칭되지 않는 데이터들은 null로 조회하는 것을 말합니다.

</details>

### Cartesian Production에 대해서 설명해주세요

<details>

서로 다른 두 테이블의 튜플을 조합하여 나올 수 있는 모든 경우의 수를 조회하는 것을 말합니다.

</details>

### union, union All에 대해서 설명해주세요

<details>

여러 개의 조회 결과를 합칠 때 사용하는 것입니다. all이 붙지 않으면 중복을 제거한 결과를 나타내는 것이고 all이 붙게 된다면 중복 또한 포함해서 조회되게 됩니다.

</details>

### rollup에 대해서 설명해주세요

<details>

group by에 붙이는 옵션으로 group by는 그룹별 결과만을 조회한다면 rollup을 붙이면 총 집계 결과도 함께 조회하는 것을 말합니다.

</details>

### 프로시저와 트리거에 대해서 설명해주세요

<details>

프로시저나 트리거는 미리 일련의 SQL 명령들의 집합을 정의해놓고 각각 상황에 맞게 절차대로 실행되는 것을 말합니다.
프로시저는 프로그래밍 언어 함수처럼 필요할 때 함수를 불러내듯이 사용을 한다면 트리거는 삽입, 삭제, 수정이 일어났을 때 자동으로 실행되게 하는 기능입니다.

</details>

### 정규화에 대해서 설명해주세요

<details>

정규화는 각각의 테이블에 중복된 데이터가 있는 것을 허용하지 않아 제거하는 것을 말하고 이를 통해 발생하는 이상현상들을 제거할 수 있습니다.
정규화는 여러 단계로 나뉘어져있고 제1정규형에서 제5정규형까지 존재합니다.
제 1정규형은 각 테이블의 컬럼들은 원자 값을 가져야 한다는 규칙입니다.
제 2정규형은 완전 함수적 종속을 이루어야 한다는 것입니다. 결정자가 되는 데이터의 집합의 일부가 다른 데이터의 결정자가 되어서는 안 된다는 것입니다.
제 3정규형은 이행적 종속을 제거해야 한다는 것입니다. 이행적 종속은 A가 B의 결정자인데 B가 C의 결정자여서 A가 C의 결정자 또한 될 수 있는 현상을 없애는 것을 말합니다.
BCNF는 릴레이션의 모든 결정자가 후보키여야 한다는 것입니다.

</details>

### 데이터 이상 현상에 대해서 설명해주세요

<details>

잘못된 테이블 설계로 인해서 중복된 데이터가 발생하여 삽입/수정/삭제 시에 논리적인 오류가 발생하는 것을 말합니다.
삽입 이상은 데이터를 삽입하려고 할 때 굳이 필요 없는 데이터도 함께 삽입을 해야 하는 현상을 말합니다.
수정 이상은 데이터를 수정하려고 할 때 다른 테이블에도 같은 데이터가 존재해서 함께 바꿔주지 않으면 같은 데이터지만 다른 정보를 가리키는 데이터가 되는 현상을 말합니다.
삭제 이상은 데이터를 삭제할 때 삭제돼서는 안될 데이터도 함께 묶여있어 같이 삭제되는 것을 말합니다.

</details>

### 트랜잭션에 대해서 설명해주세요

<details>

트랜잭션은 데이터베이스의 상태를 바꾸기 위해 수행되는 작업의 단위를 말합니다. 즉 어떤 목적을 이루기 위해서 하나 또는 두 개 이상의 SQL문이 모여서 이루어진 하나의 작업을 말합니다.
예를 들어 계좌이체 할 때 A에서 B에게 송금한다면 A 계좌에서 돈이 빠져나가고 B계좌에서 돈이 입금되기까지의 모든 작업이 하나의 작업 단위인 트랜잭션이라고 부르는 것입니다.

</details>

### 트랜잭션 특징에 대해서 설명해주세요

<details>

트랜잭션의 특징에는 ACID라고 원자성, 일관성, 독립성, 지속성이 있습니다.
원자성은 한 트랜잭션 내에서 발생하는 모든 작업은 하나의 작업으로 보기 때문에 하나가 실패하면 모두의 실패로 간주하는 꼭 모든 작업이 무사히 성공적으로 마쳐 커밋이 되던, 롤백이 되던 해야 한다는 것입니다.
일관성은 트랜잭션의 작업 처리 결과가 항상 어떤 상황에서도 같은 결과를 내놓아야 한다는 일관성을 가져야 한다는 것입니다.
독립성은 둘 이상의 트랜잭션이 동시에 실행되었을 때 서로가 트랜잭션 내 연산에 끼어들어서는 안 된다는 것을 말합니다.
지속성은 트랜잭션이 성공적으로 마무리 되었을 때 결과는 영구적으로 반영되어야 한다는 것을 말합니다.

</details>

### 격리 수준 종류에 대해서 설명해주세요

<details>

격리 수준이 엄격한 순으로 uncommitted read, committed read, repeatable read, serializable이 있습니다.
uncommitted read는 가장 낮은 격리 수준 레벨로 A, B 트랜잭션이 있을 때 A 트랜잭션이 커밋이 되지 않았음에도 반영된 데이터가 B 트랜잭션에서 읽어들 일 수 있는 것을 말합니다.
committed read는 commit을 해야지만 변경된 데이터를 다른 트랜잭션에서 읽을 수 있습니다. 하지만 B는 트랜잭션 내부에서 조회를 날리고 A 트랜잭션이 끝이 나게 되고 B 트랜잭션에서 똑같은 조회를 한 번 더 했을 때 같은 트랜잭션임에도 불구하고 다른 결과를 나타내는 문제가 발생할 수 있습니다.
repeatable read는 같은 트랜잭션 내에서는 같은 조회쿼리라면 항상 같은 결과를 보장하지만 추가적인 데이터가 insert 되었을 때 조회 결과가 달라지는 phantom read는 여전히 발생합니다.
serializable은 가장 높은 격리 수준으로 앞서 말한 dirty read, non-repeatable read, phantom read 모든 현상을 막은 격리 수준을 말합니다.

</details>

### 격리 수준에 따라 발생할 수 있는 문제점에 대해서 설명해주세요

<details>

dirty read, non-repeatable read, phantom read가 있습니다.
dirty read는 트랜잭션이 끝나지 않았음에도 다른 트랜잭션이 변경 내용을 볼 수 있는 것을 말합니다.
non-repeatable read는 같은 트랜잭션 내에서 같은 조회 쿼리를 날렸음에도 불구하고 다른 데이터가 조회되는 현상을 말합니다.
phantom read는 같은 조회 쿼리임에도 불구하고 이전에 존재하지 않았던 새로운 유형 레코드가 나타나는 현상을 말합니다.

</details>

### 무결성, 정합성에 대해서 설명해주세요

<details>

무결성은 어떤 데이터의 값이 정확한 상태인지를 나타내는 것을 말하고 정합성은 어떤 데이터들이 값이 서로 일치하는지를 나타냅니다.

</details>

### 많은 컬럼을 가지는 테이블의 경우 어떻게 설계를 해야 할까요?

<details>

공통적인 성질을 가지는 컬럼들, 또는 트랜잭션이 발생할 때 독립적으로 빈번하게 발생하는 부분을 마킹해서 따로 분리하여 테이블을 분리하고 외래키로 연결시켜주는 방식을 이용해야 합니다.

</details>

### 많은 데이터를 가지는 테이블의 경우 어떻게 설계를 해야 할까요?

<details>

한 테이블에 데이터들이 많이 있을 경우 파티셔닝 전략을 고려해볼 것 같습니다.

</details>

### 파티셔닝에 대해서 설명해주세요

<details>

한 테이블에 데이터들을 많이 담고 있을 때 데이터들을 분할시키는 데이터베이스 튜닝 기법입니다.
종류에는 range, list, hash partitioning이 있습니다.
range는 범위를 기준으로 나누는 것을 말합니다. 예로 날짜나 수치로
list는 항목, 목록이 될 수 있는 것을 기준으로 나누는 것을 말합니다. 예로 나라나 페이 지불 방식 등
hash는 해시 함수를 이용해서 나오는 값에 따라 데이터들을 나누는 것을 말합니다.

</details>

### Master-Slave 구조에 대해서 설명해주세요

<details>

기존 데이터베이스 데이터를 물리적으로 복사하여 똑같은 데이터베이스 환경을 하나 더 만드는 것을 말합니다.
이렇게 되면 slave에는 select 쿼리만 날리고 master에는 그 외 insert, update, delete 쿼리를 보내 부하를 낮출 수 있습니다.

</details>

### 데이터베이스 커넥션 풀에 대해서 설명해주세요

<details>

데이터베이스와 애플리케이션을 효율적으로 연결하기 위해서 사용됩니다.
WAS는 일정량의 DB 커넥션 객체를 생성하여 DB 커넥션 풀에 저장해놓고 DB 요청이 올 때마다 미리 생성한 객체를 가져다 쓰고 반환하여 재사용하는 것을 말합니다. 이렇게 하면 DB 커넥션 객체를 사용할 때마다 만들어서 사용할 필요가 없기 때문에 리소스 낭비를 줄일 수 있습니다.

</details>

### Index에 대해서 설명해주세요

<details>

테이블 검색 효율을 높이기 위해서 사용되는 자료구조입니다. 설정한 컬럼을 키로 해당 컬럼이 가리키는 레코드의 주소의 값과 쌍으로 저장되어 항상 정렬된 상태를 가지게 됩니다. 예를 들어 책 앞에 있는 목차로 볼 수 있습니다.

</details>

### Index를 사용하는 이유에 대해서 설명해주세요

<details>

검색 효율을 높이기 위해서입니다. 인덱스가 없다면 원하는 값을 찾기 위해서 풀스캔을 해야 하기 때문에 조회 성능이 좋지 못하지만, 인덱스를 이용하면 정렬되어있기 때문에 원하는 부분만 빠르게 찾아낼 수 있어 검색 효율을 높일 수 있습니다.

</details>

### Index의 단점에 대해서 설명해주세요

<details>

인덱스를 사용하게 되면 추가적인 저장 공간이 필요하고 삽입, 삭제 시에 오버헤드가 발생하게 됩니다. 설정한 컬럼과 그 컬럼의 주소 값을 쌍을 저장하기 위해서 저장공간이 더 필요하고, 계속해서 정렬된 상태를 유지해야 하기 때문에 삽입, 변경, 삭제 시에 유지하기 위한 추가적인 연산이 필요하게 됩니다.

</details>

### 멀티인덱싱에 대해서 설명해주세요

<details>

인덱싱은 검색 효율을 높이기 위해 어떤 키를 기준으로 정렬하는 것을 말하고 멀티 인덱싱은 이때 사용되는 키를 여러 개의 컬럼을 조합하여 생성된 인덱스를 말합니다.

</details>

### SQL Injection에 대해서 설명해주세요

<details>

클라이언트가 입력할 수 있는 칸에 임의의 SQL구문을 삽입하여 데이터베이스 값을 변조하는 것을 말합니다.

</details>

### SQL Injection을 막기 위한 방법에 대해서 설명해주세요

<details>

클라이언트에게 받은 값을 바로 디비에 대입시키는 것이 아니라 입력 값을 사전에 유효성 검증을 하거나 prepare statement를 이용해 특수문자를 자동으로 escaping 시키는 방식이 있습니다.

</details>